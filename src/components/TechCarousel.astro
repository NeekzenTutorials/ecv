---
import PythonIcon from '../assets/python-icon.png';
import JavaIcon from '../assets/java-icon.png';
import DockerIcon from '../assets/docker-icon.png';
import VueIcon from '../assets/vue-icon.png';
import NodeIcon from '../assets/node-icon.png';
import GithubIcon from '../assets/github-icon.png';
import CIcon from '../assets/c-icon.png';
import CppIcon from '../assets/cpp-icon.png';
import CsharpIcon from '../assets/csharp-icon.png';
import PHPIcon from '../assets/php-icon.png';
import UnityIcon from '../assets/unity-icon.png';
import FlutterIcon from '../assets/flutter-icon.png';
import MongoIcon from '../assets/mongodb-icon.svg';
import PgSQLIcon from '../assets/pgsql-icon.png';

/* Tableau des technologies */
const techItems = [
  { name: 'Python', icon: PythonIcon.src },
  { name: 'Java', icon: JavaIcon.src },
  { name: 'Docker', icon: DockerIcon.src },
  { name: 'Vue.js', icon: VueIcon.src },
  { name: 'Node.js', icon: NodeIcon.src },
  { name: 'GitHub', icon: GithubIcon.src },
  { name: 'C', icon: CIcon.src },
  { name: 'C++', icon: CppIcon.src },
  { name: 'C#', icon: CsharpIcon.src },
  { name: 'PHP', icon: PHPIcon.src },
  { name: 'Unity', icon: UnityIcon.src },
  { name: 'Flutter', icon: FlutterIcon.src },
  { name: 'MongoDB', icon: MongoIcon.src },
  { name: 'PostgreSQL', icon: PgSQLIcon.src },
];
---

<!-- Conteneur principal (100% largeur) -->
<div class="carousel-container">
  <!-- Bouton flèche gauche -->
  <button class="arrow arrow-left" id="arrow-left">&#10094;</button>
  
  <div class="carousel" id="carousel">
    {techItems.map((item, index) => (
      <div class="carousel-item" key={index}>
        <img src={item.icon} alt={item.name} />
        <span class="tech-name">{item.name}</span>
      </div>
    ))}
  </div>

  <!-- Bouton flèche droite -->
  <button class="arrow arrow-right" id="arrow-right">&#10095;</button>
</div>

<!-- Script client pour faire défiler au clic sur les flèches -->
<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const carousel = document.getElementById('carousel');
    const arrowLeft = document.getElementById('arrow-left');
    const arrowRight = document.getElementById('arrow-right');

    // Au clic sur la flèche gauche
    arrowLeft.addEventListener('click', () => {
      carousel.scrollBy({ left: -200, behavior: 'smooth' });
    });

    // Au clic sur la flèche droite
    arrowRight.addEventListener('click', () => {
      carousel.scrollBy({ left: 200, behavior: 'smooth' });
    });
  });
</script>

<style>
  /* Conteneur global, occupe toute la largeur, position:relative pour placer les flèches */
  .carousel-container {
    width: 100%;
    margin: 2rem auto;
    position: relative;
  }

  /* Flèches positionnées absolument aux extrémités */
  .arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 2;
    background: none;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    color: #333;
    opacity: 0.5;
    transition: opacity 0.3s, transform 0.3s;
    padding: 0 0.5rem;
  }
  .arrow:hover {
    opacity: 0.8;
    transform: translateY(-50%) scale(1.1);
  }
  .arrow-left {
    left: 0.5rem;
  }
  .arrow-right {
    right: 0.5rem;
  }

  /* Le carrousel défile horizontalement, on masque la barre de scroll */
  .carousel {
    display: flex;
    gap: 4rem; /* Espace horizontal entre les items */
    padding: 4rem;
    overflow-x: hidden; 
    scroll-behavior: smooth; 

    -webkit-overflow-scrolling: touch; /* Meilleure inertie sur mobile */
  }
  .carousel::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
  .carousel {
    scrollbar-width: none; /* Firefox */
  }

  .carousel-item {
    flex: 0 0 auto;
    width: 100px;
    text-align: center;
    position: relative; /* Important: nécessaire pour la position absolue du texte */
    cursor: pointer;
    transition: transform 0.3s;
  }

  /* Image ronde avec un léger zoom au survol */
  .carousel-item img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    transition: transform 0.3s;
    display: block;
    margin: 0 auto;
  }
  .carousel-item:hover img {
    transform: scale(1.05);
  }

  /* Le nom de la techno en position absolue pour éviter de pousser la mise en page */
  .tech-name {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    /* On le place en dessous de l’icône (100% = la hauteur de .carousel-item) */
    top: 100%;
    margin-top: 0.5rem;

    /* Apparence du texte */
    background-color: #333;
    color: #fff;
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    font-weight: bold;
    font-size: 0.8rem;

    /* Par défaut, invisible */
    opacity: 0;
    pointer-events: none; 
    transition: opacity 0.2s;
    white-space: nowrap; /* évite le retour à la ligne si le nom est long */
  }

  /* Au survol, on révèle le nom */
  .carousel-item:hover .tech-name {
    opacity: 1;
  }
</style>
